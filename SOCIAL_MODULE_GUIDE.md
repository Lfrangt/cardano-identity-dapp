# 社交连接模块使用指南

## 概述

社交连接模块让用户可以通过钱包地址搜索和访问其他用户的身份信息，建立去中心化的社交网络。

## ✨ 主要功能

### 1. 用户搜索

**通过钱包地址搜索**
- 输入完整的 Cardano 钱包地址进行精确搜索
- 输入部分地址、用户名或兴趣进行模糊搜索
- 实时显示搜索结果

**搜索示例：**
```
精确搜索: addr_test1qz2fxv2umyhttkxyxp8x0dlpdt3k6cwng5pxj3jhsyd...
模糊搜索: Cardano
模糊搜索: 开发者
```

### 2. 查看公开档案

**档案信息展示**
- 用户基本信息（名称、简介、兴趣）
- 钱包地址
- 技能列表和等级
- 成就展示
- 连接统计
- 验证状态

**隐私控制**
- 公开档案：所有人可见
- 私密档案：仅自己可见
- 选择性分享：仅连接的好友可见完整信息

### 3. 连接管理

**发送连接请求**
- 向其他用户发送连接请求
- 添加个人消息
- 查看请求状态

**处理连接请求**
- 查看收到的连接请求
- 接受或拒绝请求
- 查看请求者的档案

**管理连接**
- 查看所有连接列表
- 查看共同连接
- 移除连接关系

### 4. 推荐系统

**基于兴趣推荐**
- 自动推荐有共同兴趣的用户
- 显示相似度评分
- 一键发送连接请求

### 5. 连接统计

**实时统计**
- 总连接数
- 待处理请求数
- 推荐用户数
- 共同连接数

## 🚀 使用流程

### 第一步：搜索用户

1. 点击"🤝 社交连接"标签
2. 选择"🔍 搜索用户"
3. 输入钱包地址或关键词
4. 点击"搜索"按钮
5. 从结果中选择用户

### 第二步：查看档案

1. 点击搜索结果中的用户
2. 查看完整的公开档案
3. 查看技能和成就
4. 查看共同连接（如果有）

### 第三步：发送连接请求

1. 在用户档案页面
2. 点击"🤝 发送连接请求"
3. 系统自动发送请求
4. 等待对方接受

### 第四步：管理连接

1. 切换到"🤝 我的连接"标签
2. 查看所有已连接的用户
3. 点击用户查看档案
4. 可以移除连接

### 第五步：处理请求

1. 切换到"📬 连接请求"标签
2. 查看待处理的请求
3. 点击"✓ 接受"或"✕ 拒绝"
4. 接受后自动建立连接

## 📊 数据存储

### LocalStorage 结构

```javascript
{
  // 社交连接
  "social_connections": [
    {
      "id": "conn_1234567890_abc",
      "walletAddress": "addr_test1...",
      "displayName": "用户A",
      "avatar": "...",
      "bio": "简介",
      "connectedAt": 1234567890,
      "mutualConnections": 5,
      "status": "accepted",
      "initiatedBy": "addr_test1..."
    }
  ],
  
  // 连接请求
  "connection_requests": [
    {
      "id": "req_1234567890_xyz",
      "fromAddress": "addr_test1...",
      "fromName": "用户B",
      "toAddress": "addr_test1...",
      "message": "你好！",
      "timestamp": 1234567890,
      "status": "pending"
    }
  ]
}
```

## 🔒 隐私保护

### 档案隐私级别

**公开 (public)**
- 所有人都可以查看完整档案
- 技能和成就完全可见
- 适合公众人物和开放分享

**私密 (private)**
- 只有自己可以查看
- 其他人无法搜索到
- 最高隐私保护

**选择性分享 (selective)**
- 基本信息对所有人可见
- 详细信息仅对已连接的好友可见
- 平衡隐私和社交

### 数据安全

1. **本地存储**
   - 连接数据存储在浏览器本地
   - 不会自动同步到服务器
   - 清除浏览器数据会丢失连接

2. **钱包验证**
   - 所有操作需要钱包连接
   - 基于钱包地址识别身份
   - 无法伪造他人身份

3. **隐私控制**
   - 用户完全控制可见内容
   - 可随时调整隐私设置
   - 可随时移除连接

## 🎯 最佳实践

### 1. 完善个人档案

在建立连接前：
- 创建完整的身份档案
- 添加真实的技能和成就
- 设置合适的隐私级别
- 填写兴趣标签

### 2. 主动建立连接

- 搜索感兴趣的用户
- 发送个性化的连接请求
- 查看推荐用户
- 参与共同兴趣的讨论

### 3. 维护社交关系

- 定期查看连接列表
- 及时处理连接请求
- 与连接的用户互动
- 为好友的技能背书（规划中）

### 4. 保护隐私

- 不要公开敏感信息
- 谨慎接受陌生请求
- 定期审查连接列表
- 移除不活跃连接

## 🛠️ 技术实现

### 核心服务

```typescript
// 社交连接服务
import {
  getUserConnections,          // 获取连接列表
  areConnected,                 // 检查连接状态
  sendConnectionRequest,        // 发送请求
  acceptConnectionRequest,      // 接受请求
  rejectConnectionRequest,      // 拒绝请求
  removeConnection,             // 移除连接
  searchUserByAddress,          // 精确搜索
  searchUsers,                  // 模糊搜索
  getPublicProfile,             // 获取公开档案
  getMutualConnections,         // 获取共同连接
  getRecommendedConnections     // 获取推荐
} from '@/lib/services/social-connection'
```

### 组件架构

```
SocialHub (主组件)
├── UserSearch (用户搜索)
├── PublicProfileView (档案查看)
└── ConnectionsManager (连接管理)
    ├── 我的连接列表
    └── 连接请求列表
```

### 数据类型

```typescript
// 连接
interface Connection {
  id: string
  walletAddress: string
  displayName: string
  avatar?: string
  bio?: string
  connectedAt: number
  mutualConnections: number
  status: 'pending' | 'accepted' | 'blocked'
  initiatedBy: string
}

// 连接请求
interface ConnectionRequest {
  id: string
  fromAddress: string
  fromName: string
  toAddress: string
  message?: string
  timestamp: number
  status: 'pending' | 'accepted' | 'rejected'
}

// 公开档案视图
interface PublicProfileView {
  walletAddress: string
  displayName: string
  bio: string
  skills: Skill[]
  achievements: Achievement[]
  interests: string[]
  verified: boolean
  connectionCount: number
  isConnected: boolean
  canConnect: boolean
}
```

## 🚧 规划中功能

### 短期（1-2 月）

- [ ] 技能背书功能
- [ ] 连接请求附加消息
- [ ] 批量操作
- [ ] 连接分组管理

### 中期（3-6 月）

- [ ] 私信功能
- [ ] 群组和社区
- [ ] 活动动态
- [ ] 声誉系统

### 长期（6+ 月）

- [ ] 去中心化存储（IPFS）
- [ ] 链上验证
- [ ] 跨平台社交图谱
- [ ] 加密通信

## 📱 界面预览

### 搜索用户界面
```
┌─────────────────────────────────┐
│  [搜索框：钱包地址或关键词]  [🔍]  │
├─────────────────────────────────┤
│  搜索结果 (3)                    │
│                                 │
│  👤 用户A ✓                      │
│  Cardano 开发者                  │
│  addr_test1...  • Cardano, DeFi  │
│  ─────────────────────────────  │
│  👤 用户B                        │
│  区块链爱好者                     │
│  addr_test1...  • Music, Art    │
└─────────────────────────────────┘
```

### 档案查看界面
```
┌─────────────────────────────────┐
│  [← 返回]              [🤝 发送请求] │
├─────────────────────────────────┤
│   👤  用户A  ✓已验证  🤝已连接    │
│                                 │
│   Cardano DApp 开发者            │
│   区块链技术爱好者...            │
│                                 │
│   Cardano • DeFi • NFT          │
│                                 │
│   5 技能  |  10 成就  |  20 连接  │
├─────────────────────────────────┤
│   🎯 技能                        │
│   ━━━━━━━━━━━━━━━━━━━━━━━━━━   │
│   Cardano ███████ 高级           │
│   React   █████ 中级             │
├─────────────────────────────────┤
│   🏆 成就                        │
│   ━━━━━━━━━━━━━━━━━━━━━━━━━━   │
│   🏆 完成第一个 DApp             │
│   ⭐ 贡献开源项目                │
└─────────────────────────────────┘
```

### 连接管理界面
```
┌─────────────────────────────────┐
│  [🤝 我的连接 (15)] [📬 请求 (3)] │
├─────────────────────────────────┤
│  👤 用户B                        │
│  区块链爱好者                     │
│  📅 2025-11-15  • 3 个共同连接   │
│  [查看档案]  [移除]              │
│  ─────────────────────────────  │
│  👤 用户C                        │
│  NFT 艺术家                      │
│  📅 2025-11-10  • 1 个共同连接   │
│  [查看档案]  [移除]              │
└─────────────────────────────────┘
```

## 🔧 故障排除

### 搜索不到用户

**原因：**
- 钱包地址输入错误
- 用户未创建档案
- 用户档案设置为私密

**解决：**
1. 检查地址拼写
2. 确认用户已创建档案
3. 尝试其他搜索关键词

### 无法发送连接请求

**原因：**
- 已经是好友
- 已发送过请求
- 未创建自己的档案

**解决：**
1. 检查连接状态
2. 查看已发送请求
3. 先创建个人档案

### 连接列表为空

**原因：**
- 浏览器数据被清除
- 尚未建立任何连接
- 使用了不同钱包

**解决：**
1. 重新建立连接
2. 确保使用同一钱包
3. 开始搜索和连接用户

## 💡 使用技巧

### 1. 快速建立网络

- 从推荐用户开始
- 查找有共同兴趣的人
- 参与社区活动
- 主动发起连接

### 2. 提高可见度

- 完善个人档案
- 添加多样的兴趣标签
- 获取技能背书
- 设置公开隐私

### 3. 有效社交

- 定期更新档案
- 回应连接请求
- 与好友互动
- 分享有价值内容

## 📞 支持

遇到问题？
1. 查看本指南
2. 检查浏览器控制台
3. 提交 Issue
4. 加入社区讨论

---

**构建去中心化社交网络 | Powered by Cardano**

